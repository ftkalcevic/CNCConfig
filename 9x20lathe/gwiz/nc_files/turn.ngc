O<turn> sub (outside diameter turning)
    #<startZ> = #1
    #<endZ> = #2
    #<feedZ> = #3
    #<stepX> = #4
    #<sfm> = #5

    #<max_rpm> = 1200
    #<clearance> = 2

    (verify parameters)
    o5 if [ #<endZ> GT #<startZ> ]
        ! endZ coordinate must be less than or equal to startZ
    o5 endif

    (start/end dia)
    #<xPos> = #5420
    #<xFinish> = [#<xPos> - #<stepX>]


    (Make sure spindle is on)
    M3

    (rapid to start)
    G0 Z#<startZ>
    G0 X[#<xFinish>]

    (CSS mode)
    #<mpm> = [#<sfm> * 12 * 25.4/1000]
    G96 D#<max_rpm> S#<mpm>

    (cut)
    G33 Z#<endZ> K#<feedZ>

    (retract)
    G0 X[#<xFinish>+#<clearance>] Z[#<endZ>+#<clearance>]
    G0 Z[#<startZ>]
    G0 X[#<xFinish>]

    (spindle off )
    M5
O<turn> endsub

